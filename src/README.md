# 3ds Max车道标线生成插件

## 项目概述

本插件基于3ds Max C++ SDK开发，用于从样条线自动生成车道标线。插件支持多种标线类型（如车道线、斑马线、导流线等），并集成RANSAC算法进行车道线拟合，同时提供交叉路口识别功能。

## 功能特点

- **智能车道线拟合**：基于RANSAC算法对任意样条线进行车道线拟合
- **交叉路口识别**：自动识别不同类型的交叉路口并调整标线生成策略
- **多类型标线生成**：支持车道线、斑马线、导流线等多种标线类型
- **参数化控制**：通过界面灵活设置标线类型、颜色、宽度等属性
- **实时预览**：参数调整时立即在视口中显示效果

## 编译指南

### 环境要求

- 3ds Max 2021或更高版本
- Visual Studio 2019或更高版本
- 3ds Max SDK（与3ds Max版本匹配）
- CMake 3.10或更高版本（可选，用于生成项目文件）

### 使用Visual Studio编译

1. 打开Visual Studio，创建新的DLL项目
2. 将`src`目录下的所有文件添加到项目中
3. 配置项目属性：
   - 包含目录：添加3ds Max SDK的include目录
   - 库目录：添加3ds Max SDK的lib目录
   - 链接器输入：添加core.lib, geom.lib, mesh.lib, maxutil.lib, maxscrpt.lib, paramblk2.lib等依赖库
   - 输出文件扩展名：.dlr
4. 编译项目

### 使用CMake编译

1. 修改`CMakeLists.txt`中的`MAX_SDK_PATH`变量，指向您的3ds Max SDK安装路径
2. 创建构建目录：`mkdir build && cd build`
3. 生成项目文件：`cmake ..`
4. 编译项目：`cmake --build . --config Release`

## 安装方法

1. 将编译生成的`RoadLineGenerator.dlr`文件复制到3ds Max的plugins目录
   - 通常位于`C:\Program Files\Autodesk\3ds Max 20XX\plugins`
2. 启动3ds Max
3. 在实用工具面板中找到"车道标线生成器"工具

## 使用方法

1. 在3ds Max中创建或导入样条线
2. 选择样条线
3. 打开实用工具面板，找到"车道标线生成器"
4. 设置标线参数：
   - 标线类型：选择车道线、斑马线或导流线
   - 宽度：设置标线宽度
   - 间距：设置虚线间距
   - 颜色：设置标线颜色
5. 点击"生成标线"按钮

## 开发进度

- [x] 基础框架搭建
- [x] RANSAC算法实现
- [x] 交叉路口识别功能
- [x] 标线生成逻辑
- [ ] 参数面板完善
- [ ] 实时预览功能
- [ ] 性能优化
- [ ] 用户测试与反馈

## 注意事项

- 当前版本为开发中的原型，部分功能可能不完善
- RANSAC算法参数可能需要根据具体场景调整
- 交叉路口识别功能对于复杂路口可能需要手动辅助

## 后续计划

1. 完善参数面板，添加更多控制选项
2. 优化RANSAC算法，提高拟合精度
3. 增强交叉路口识别功能，支持更多类型的路口
4. 添加更多标线类型，如箭头、文字等
5. 实现批量处理功能，支持一次处理多条样条线